pkgname=ngtcp2
pkgver=0.0.20210911.0314
_commit=becfcafedd9c5508c3d95bb1bb77915cf3dc8f09
pkgrel=0
pkgdesc="ngtcp2"
url="https://nghttp2.org"
arch="all"
license="MIT"
makedepends="autoconf automake libtool openssl-dev libev-dev"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/ngtcp2/ngtcp2/archive/$_commit.tar.gz"
builddir="$srcdir"/$pkgname-$_commit

build() {
	autoreconf -vif
	CC=$CC CXX=$CXX ./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sbindir=/usr/bin \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var \
		--enable-static \
		--enable-lib-only
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

b2sums="70dca2e0251af798965197c0df62401129a08aa5dbdc76addc911a22475f351df2a14beb7f0b8bb7ac3470831f77767017b56629e1276e4786d5bf65d31120b0  ngtcp2-0.0.20210911.0314.tar.gz"

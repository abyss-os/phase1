pkgname=zig
pkgver=0.7.0
pkgrel=1
pkgdesc="Zig!"
url="https://github.com/ziglang/zig"
arch="all"
license="MIT"
makedepends="ninja cmake"
source="$pkgname-$pkgver.tar.gz::https://github.com/ziglang/zig/archive/$pkgver.tar.gz
		targets.patch"

builddir=$srcdir/$pkgname-$pkgver
_builddir=$srcdir/build

prepare() {
	default_prepare
	mkdir -p $_builddir && cd $_builddir
	cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DCMAKE_SKIP_INSTALL_RPATH=YES $builddir
}

build() {
	cd $_builddir
	ninja
}

package() {
	cd $_builddir
	DESTDIR=$pkgdir ninja install
}

b2sums="fab2d4482f8383f18a37a6a6ac8c683252babcad0650c31e01d7af6c4034ad1baef9655ac816213a463064018e2d6f6dbcb8c3e0c65a74750b19d643465c67c3  zig-0.7.0.tar.gz
20d7cb128e47d2ebf1be995eca6099275a39d5d1edcce1700a637c99ac637b14de2a12db780a726e634c68d975ab05bb012e9576b31680c206d0cdfbc446e44a  targets.patch"

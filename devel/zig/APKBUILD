pkgname=zig
pkgver=0.8.0_git
_commit=f79b487337d7d11ae35fd4a15294c75e23c5f02b
pkgrel=0
pkgdesc="Zig!"
url="https://github.com/ziglang/zig"
arch="x86_64 aarch64 ppc64le"
license="MIT"
makedepends="samurai cmake libexecinfo-dev libxml2-dev ncurses-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/ziglang/zig/archive/$_commit.tar.gz"

builddir=$srcdir/$pkgname-$_commit
_builddir=$srcdir/build

prepare() {
	default_prepare
	mkdir -p $_builddir && cd $_builddir
	cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DCMAKE_SKIP_INSTALL_RPATH=YES $builddir
}

build() {
	cd $_builddir
	ninja
}

package() {
	cd $_builddir
	DESTDIR=$pkgdir ninja install
}

b2sums="652f2e0546202c5e5ff8ee812a5e77821b6a6bb82b60b281121c87115148f6b8ba1c9ceb508275b83b389193dcf68efca8e1071e38659d120731ccc00f76fadc  zig-0.8.0_git.tar.gz"
